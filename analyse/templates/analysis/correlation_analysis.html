{% load static %}
<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <title>Analyse de Corrélation - Analyse de Données</title>
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Custom CSS -->
    <link rel="stylesheet" href="{% static 'css/custom.css' %}">
    <!-- Plotly JS -->
    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
</head>
<body>

<!-- Navbar -->
{% include 'components/navbar.html' %}

<div class="container mt-5">
    <h2 class="text-center">Analyse de Corrélation</h2>

    <!-- Static Correlation Matrix -->
    <div class="mt-4">
        <h3>Matrice de Corrélation (Statique)</h3>
        <div class="table-responsive">
            {{ correlation_matrix|safe }}
        </div>
    </div>

    <!-- Static Heatmap -->
    <div class="mt-4">
        <h3>Carte Thermique (Statique)</h3>
        <img src="data:image/png;base64,{{ heatmap_base64 }}" alt="Heatmap" class="img-fluid" />
    </div>

    <!-- Interactive Heatmap -->
    <div class="mt-4">
        <h3>Carte Thermique (Interactive)</h3>
        <div>{{ interactive_heatmap_html|safe }}</div>
    </div>

    <!-- Static Regression Plots -->
    <div class="mt-4">
        <h3>Graphiques de Régression (Statique)</h3>
        <div class="row">
            {% for title, plot in reg_plots %}
            <div class="col-md-6 col-lg-4 mb-4">
                <div class="card">
                    <img src="data:image/png;base64,{{ plot }}" alt="{{ title }}" class="card-img-top img-fluid" />
                    <div class="card-body">
                        <h5 class="card-title">{{ title }}</h5>
                    </div>
                </div>
            </div>
            {% empty %}
            <p>Aucun graphique de régression disponible.</p>
            {% endfor %}
        </div>
    </div>

    <!-- Interactive Regression Plots -->
    <div class="mt-4">
        <h3>Graphiques de Régression (Interactifs)</h3>
        {% for interactive_plot in interactive_reg_plots %}
            <div class="mt-3">{{ interactive_plot|safe }}</div>
        {% empty %}
            <p>Aucun graphique de régression disponible.</p>
        {% endfor %}
    </div>
</div>


<!-- Bootstrap JS Bundle -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>